<div class="relative">
  <div id="slider" class="overflow-x-auto snap-x snap-mandatory flex space-x-6 px-4">
    {{ $projSec := site.GetPage "section" "projects" }}
    {{ range $projSec.Pages }}
      <div class="snap-center shrink-0 w-[80vw] bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4">
        <!-- 큰 이미지 -->
        {{ with .Params.featured }}
          <img src="{{ . }}" alt="{{ $.Title }}" 
              class="w-full h-[400px] object-cover rounded-lg mb-4">
        {{ end }}

        <!-- 제목 -->
        <h2 class="text-2xl font-bold mb-2 text-center">{{ .Title }}</h2>

        <!-- 요약 -->
        <p class="text-gray-700 dark:text-gray-300 text-center">
          {{ .Summary }}
        </p>
      </div>
    {{ end }}
  </div>

  <!-- 좌우 버튼 -->
  <button id="prevBtn" class="absolute left-2 top-1/2 -translate-y-1/2 bg-white/70 dark:bg-gray-700 p-2 rounded-full shadow">
    ◀
  </button>
  <button id="nextBtn" class="absolute right-2 top-1/2 -translate-y-1/2 bg-white/70 dark:bg-gray-700 p-2 rounded-full shadow">
    ▶
  </button>
</div>

<script>
  const slides = document.querySelectorAll('.snap-center');
  const track = document.getElementById('slider');
  let index = 0;

  // 5초마다 다음 슬라이드로 이동
  let autoSlide = setInterval(() => {
    index++;
    show();
  }, 5000);

  // (선택) 마우스 올렸을 때 멈추고, 나가면 다시 실행
  const slider = document.getElementById('slider');
  slider.addEventListener('mouseenter', () => clearInterval(autoSlide));
  slider.addEventListener('mouseleave', () => {
    autoSlide = setInterval(() => {
      index++;
      show();
    }, 5000);
  });

  function show(){
    if(index < 0)
      index = slides.length - 1;
    if(index >= slides.length){
      index = 0;
    }
    slides[index].scrollIntoView({
    behavior: "smooth",   // 부드럽게
    inline: "center",     // 가로 중앙 정렬
    block: "nearest"      // 세로는 가장 가까운 위치
  });
  }

  document.getElementById('prevBtn').addEventListener('click', () => {
    index--;
    show();
  });

  document.getElementById('nextBtn').addEventListener('click', () => {
    index++;
    show();
  });

  show();
</script>